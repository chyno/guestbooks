{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.7d190b38ac3055b518c9.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["\n// This is the Link API\nimport Link from 'next/link';\nimport \"isomorphic-fetch\";\nimport {\n  Form,\n  TextField, SubmitField \n} from 'react-components-form';\nimport Schema from 'form-schema-validation';\n\nconst Index = () => (\n  <div>\n    <MainForm/>\n    <Link href='./guestbook' ><a>Current Guestbooks</a></Link>\n</div>\n\n)\n\nexport default Index\n\nconst mainSchema = new Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  message: {\n    type: String,\n    required: true\n  }\n});\n\n\nclass MainForm extends React.Component {\n    constructor(props) { \n      super(props);\n      this.state = {name : '', message: '', result: ''};   \n      this.submitForm = this.submitForm.bind(this);\n    }\n  \n    // Promise for posts\n     postResult$ = null;  \n     submitForm (data) {\n     console.log('submitting form .....');\n     this.postResult$ =   fetch('/api/guestbook', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      });\n\n      this.postResult$.then((res) => {\n        console.log('after post....');\n        res.status === 200 ? this.setState( {name : '', message: '', result: 'Success!'}) : his.setState( {name : '', message: '', result: 'Error'});\n      })\n    }\n\n\n    render() {\n      return (\n        <Form\n        schema={mainSchema}\n        onSubmit={this.submitForm}\n        onError={(errors, data) => {\n          Object.assign({}, this.state, { result : ''})\n        }}\n      >\n        <TextField name=\"name\" label=\"Name\" type=\"text\" value={this.state.name} />\n        <TextField name=\"message\" label=\"Message\" type=\"text\" value={this.state.message} />\n        <SubmitField value=\"Submit\" />\n        <p>{this.state.result}</p>\n      </Form>\n\n      );\n    }\n  }\n\n\nclass Message extends React.Component {\n    render() {\n      return  (<div>Tmessage here</div>);\n    }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AAAA;AAGA;AAAA;AAHA;AACA;AAOA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AACA;AAWA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;AAIA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;AAGA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AALA;AAOA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAKA;;;;AA3CA;AACA;AA8CA;;;;;;;;;;;;;AACA;AACA;AACA;;;;AAHA;;;;A","sourceRoot":""}